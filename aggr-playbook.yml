---
# This playbook assumes the following is already installed on the server:
#   - python3.12
#   - pip3
#     - sudo apt install python3-pip
#   - django
#     - sudo apt install python3-django
- name: Update web servers
  hosts: aws
  remote_user: matt
  become: true

  tasks:
  - name: Remove Repo
    ansible.builtin.file:
      path: /etc/django/
      state: absent
  
  - name: Clone Repo
    ansible.builtin.git:
      repo: git@github.com:MattisTrees/aggregator.git
      dest: /etc/django/
      single_branch: yes
      version: main
      key_file: /home/matt/.ssh/id_ed25519